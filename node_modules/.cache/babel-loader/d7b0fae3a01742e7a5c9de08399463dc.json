{"ast":null,"code":"import database from '../firebase/firebaseConfig';\nexport const addBlog = blog => ({\n  type: \"ADD_BLOG\",\n  blog\n});\nexport const addBlogToDatabase = (blogData = {}) => {\n  return (dispatch, getState) => {\n    const uid = getState().auth.uid;\n    const {\n      title = '',\n      description = '',\n      dateAdded = 0\n    } = blogData;\n    const blog = {\n      title,\n      description,\n      dateAdded,\n      uid\n    };\n    database.ref(\"blogs\").push(blog).then(res => {\n      dispatch(addBlog({\n        id: res.key,\n        ...blog\n      }));\n    });\n  };\n};\nexport const removeBlog = id => ({\n  type: \"REMOVE_BLOG\",\n  id: id\n});\nexport const removeBlogFromDatabase = id => {\n  return dispatch => {\n    return database.ref(`blogs/${id}`).remove().then(() => {\n      dispatch(removeBlog(id));\n    });\n  };\n};\nexport const editBlog = (id, updates) => ({\n  type: \"EDIT_BLOG\",\n  id,\n  updates\n});\nexport const editBlogFromDatabase = (id, updates) => {\n  return dispatch => {\n    return database.ref(`blogs/${id}`).update(updates).then(() => {\n      dispatch(editBlog(id, updates));\n    });\n  };\n};\nexport const setBlogs = blogs => ({\n  type: \"SET_BLOGS\",\n  blogs\n});\nexport const getBlogsFromDatabase = () => {\n  return (dispatch, getState) => {\n    const uid = getState().auth.uid;\n    return database.ref(\"blogs\").once(\"value\").then(snapshot => {\n      const blogs = [];\n      snapshot.forEach(blog => {\n        const result = blog.val();\n\n        if (result.uid == uid) {\n          blogs.push({\n            id: blog.key,\n            ...result\n          });\n        }\n      });\n      dispatch(setBlogs(blogs));\n    });\n  };\n};\nexport const clearBlogs = () => ({\n  type: \"CLEAR_BLOGS\"\n});","map":{"version":3,"sources":["C:/Users/Hp/OneDrive/Desktop/blog-app/src/actions/blogs.js"],"names":["database","addBlog","blog","type","addBlogToDatabase","blogData","dispatch","getState","uid","auth","title","description","dateAdded","ref","push","then","res","id","key","removeBlog","removeBlogFromDatabase","remove","editBlog","updates","editBlogFromDatabase","update","setBlogs","blogs","getBlogsFromDatabase","once","snapshot","forEach","result","val","clearBlogs"],"mappings":"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","sourcesContent":["import database from '../firebase/firebaseConfig';\n\nexport const addBlog = (blog) => ({\n    type: \"ADD_BLOG\",\n    blog\n})\n\nexport const addBlogToDatabase = (blogData = {}) => {\n    return (dispatch, getState) => {\n        const uid = getState().auth.uid;\n        const { title='', description='',dateAdded=0 } = blogData;\n        const blog = {title,description,dateAdded, uid};\n\n        database.ref(\"blogs\").push(blog).then((res) => {\n            dispatch(addBlog({\n                id: res.key,\n                ...blog\n            }))\n        })\n    }\n}\n\nexport const removeBlog = (id) => (\n    {\n        type: \"REMOVE_BLOG\",\n        id: id\n    }\n)\n\nexport const removeBlogFromDatabase = (id) => {\n    return (dispatch) => {\n        return database.ref(`blogs/${id}`).remove().then(() => {\n            dispatch(removeBlog(id));\n        })\n    }\n}\n\nexport const editBlog = (id,updates) => ({\n    type: \"EDIT_BLOG\",\n    id,\n    updates\n})\n\nexport const editBlogFromDatabase = (id,updates) => {\n    return (dispatch) => {\n        return database.ref(`blogs/${id}`).update(updates).then(() => {\n            dispatch(editBlog(id,updates));\n        })\n    }\n}\n\nexport const setBlogs = (blogs) => ({\n    type: \"SET_BLOGS\",\n    blogs \n})\n\nexport const getBlogsFromDatabase = () => {\n    return (dispatch, getState) => {\n        const uid = getState().auth.uid;\n        return  database.ref(\"blogs\").once(\"value\").then((snapshot) => {\n            const blogs = [];\n\n            snapshot.forEach((blog) =>{\n                const result = blog.val();\n\n                if(result.uid == uid) {\n                    blogs.push({\n                    id: blog.key,\n                    ...result\n                })\n                }\n                \n            })\n\n            dispatch(setBlogs(blogs));\n        })\n    }\n}\n\nexport const clearBlogs = () => ({\n    type: \"CLEAR_BLOGS\"\n})"]},"metadata":{},"sourceType":"module"}